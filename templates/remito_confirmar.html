{% extends "base.html" %}
{% block title %}Confirmar Cantidades Reales{% endblock %}

{% block content %}
<h1 class="mb-4 text-white border-bottom pb-2">
  <i class="bi bi-check2-square me-2 text-success"></i> Confirmar Cantidades Reales
</h1>

<form method="POST" action="{{ url_for('entregas.generar_remito', id_pedido=id_pedido) }}">
  <table class="table table-dark table-striped">
    <thead>
      <tr>
        <th>Producto</th>
        <th>Cantidad Pedida</th>
        <th>Cantidad Real</th>
        <th>Unidad</th>
        <th>Precio</th>
      </tr>
    </thead>
    <tbody>
      {% for detalle in detalles %}
      <tr>
        <td>{{ detalle[1] }}</td>
        <td>{{ detalle[2] }}</td>
        <td>
          <input 
            type="number" 
            step="0.01" 
            min="0" 
            name="cantidad_real" 
            value="{{ detalle[3] if detalle[3] is not none else detalle[2] }}" 
            class="form-control form-control-sm"
            required
          >
          <input type="hidden" name="id_detalle" value="{{ detalle[0] }}">
        </td>
        <td>{{ detalle[4] }}</td>
        <td>${{ "%.2f"|format(detalle[5]) }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="text-end mt-3">
    <button type="submit" class="btn btn-success">
      <i class="bi bi-save2 me-1"></i> Confirmar Entrega
    </button>
    <a href="{{ url_for('entregas.lista_entregas') }}" class="btn btn-secondary ms-2">Cancelar</a>
  </div>
</form>
{% endblock %}
